[gd_scene load_steps=10 format=3 uid="uid://bwh738xh4u5p"]

[ext_resource type="Shader" uid="uid://iip0itxdwxl0" path="res://scripts/shaders/stylized_fire.gdshader" id="1_4bjjl"]
[ext_resource type="Material" uid="uid://bmfa8ls4liji0" path="res://assets/particles/stylized_fire_particle.tres" id="2_ipank"]
[ext_resource type="Texture2D" uid="uid://bgxegv32lmxou" path="res://assets/textures/vfx/HoleNoise.png" id="2_l80mv"]
[ext_resource type="Texture2D" uid="uid://6ck83pikq2h7" path="res://assets/textures/vfx/FireMask.png" id="3_hcyup"]
[ext_resource type="Script" uid="uid://d3dlb46ewodpp" path="res://scripts/visual_helpers/flickering_light.gd" id="3_ipank"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ltevf"]
render_priority = 1
shader = ExtResource("1_4bjjl")
shader_parameter/noise_texture = ExtResource("2_l80mv")
shader_parameter/texture_mask = ExtResource("3_hcyup")
shader_parameter/emission_intensity = 2.0
shader_parameter/time_scale = 3.0
shader_parameter/texture_scale = Vector2(1, 1)
shader_parameter/edge_softness = 0.1

[sub_resource type="QuadMesh" id="QuadMesh_342rn"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_l80mv"]
noise_type = 2
frequency = 0.3026

[sub_resource type="NoiseTexture3D" id="NoiseTexture3D_342rn"]
noise = SubResource("FastNoiseLite_l80mv")

[node name="Fire" type="GPUParticles3D"]
material_override = SubResource("ShaderMaterial_ltevf")
amount = 50
randomness = 0.74
fixed_fps = 60
draw_order = 1
process_material = ExtResource("2_ipank")
draw_pass_1 = SubResource("QuadMesh_342rn")

[node name="OmniLight3D" type="OmniLight3D" parent="."]
light_color = Color(0.707911, 0.395783, 0.0712182, 1)
light_volumetric_fog_energy = 12.215
shadow_enabled = true
shadow_bias = 1.045
shadow_opacity = 0.52
shadow_blur = 10.0
omni_range = 24.801
omni_attenuation = 0.685
script = ExtResource("3_ipank")
noise = SubResource("NoiseTexture3D_342rn")
position_jitter_amount = 0.05

[node name="Timer" type="Timer" parent="OmniLight3D"]
wait_time = 0.1
autostart = true

[connection signal="timeout" from="OmniLight3D/Timer" to="OmniLight3D" method="_on_timer_timeout"]
